CALENDAR
- dopo associazione cliente da web appt table, aggiornare calendar ma RESTARE nella table (non chiuderla)
- copia-incolla del blocco prende anche lo stato, è ok, ma copia da blocco in stato 2 (pagato) invece deve poi incollare in stato default! 
- aggiungere location.reload dopo eliminazione o resize blocchi

CASSA
- provare console RCH per sblocco
- testare prepagate (anche in calendar)
- se porto in cassa cliente con prepagata da calendar, non visualizza popup e non scala credito da prepagata
- se porto in cassa prepagata con "vai in cassa" e cambio importo scontrino, non si capisce se la dà come pagata o no
- se indico un beneficiario per prepagata, va associato da database e la prepagata va associata a lui

SETTINGS:
- in Servizi/Utenti sezione visibile solo a owner: SEZIONI OSCURABILI DA PROFILO OWNER: 1) whatsapp, booking, marketing 2) pacchetti
- serve gestione migliore della connettività a whatsapp/unipile in caso piu client siano collegati!

WEB APP:
- creare app per mobile (serve logo per creare icona!)

SITI:
- creare touch-icon e manifest.json per SunExpressBeauty e terminare SunExpressBeauty

GENERALE: 
- inserire più tooltip esplicativi (calendar, turni operatore, ecc)
- creare logging dei messaggi flask del terminale e da console?
- creare wrapper per update via web
- creare icona! (dopo aver ricevuto il logo)

SOLARIUM:
- boxare l'app e mettere tutto su un solo server
- invio whatsapp a cliente in automatico

COMMERCIALIZZAZIONE:
- scegliere LOGO E creare brand booklet con stili, font, icone ecc
- creare sito e sezioni per commercializzazione
- creare tutorial e agentic AI bot per primo supporto tecnico


UNIPILE_DSN=api15.unipile.com:14552
UNIPILE_ACCESS_TOKEN=T+y/2c/b.0MQy6V+D5z86R+aCJtQFZ4Ht50m/fe8HXNALTSOO0ck=










CORRETTI, DA VERIFICARE:
- associare eventualmente solo certi servizi (o certe categorie, tipo prepagata lampade) alle prepagate
- adattare pulsanti in pacchetto_detail/prepagate
- fare in modo di andare in cassa.html per pagamento prepagate
- ZOOM NAVIGATOR in Calendar e tasto Refresh in Base, possono essere disattivati/attivati da Settings/Business_Info
- pseudoblock navigator deve avere possibilità di AUTO-RIDURSI se copre celle attive che voglio utilizzare (tasto "riduci" e "ingrandisci"?)
- controllare blocco con cliente eliminato ("?" invece di nome e cognome), se si elimina cliente con appuntamento in calendar mostrare warning
- se per esempio pulisco cache e vengono quindi perse dalla memoria le credenziali, non deve aspettare un'operazione per dare errore, ma deve AUTOMATICAMENTE SLOGGARSI
- se copio un blocco in stato 2 in cui note c'era " ***NUOVO CLIENTE*** " allora SOLO IN QUESTO CASO la nota non deve essere copia-incollata
- se un blocco è in stato 2 (pagato), non deve MAI POTERSI ACCENDERE MY-SPIA (anche su touch-ui occhio), anche se un blocco contiguo è in my-spia
- se aggiorno un dato (nome cognome cell) da modal cliente, il nuovo dato dev'essere SUBITO VISIBILE una volta usciti da quel modal
- modalità default: se taglio un blocco, sui blocchi contigui appare correttamente il popup button "taglia" ma a mouseover mostra ancora tutti gli altri popup-buttons!
- se ho blocchi contigui con my-spia, e taglio e sposto uno dei blocchi, dopo il release quel singolo blocco non è più con my-spia lampeggiante: correggere
- in Clients.html bisogna far capire che cosa sono i campi (per es. data... che è compleanno)
- Aggiungere spazio per logo negozio (disattivabile, salvabile in db)
- OCCHIO AL CLICK SU INVIA CODICE, a volte lo prende al 3° click su mobile!!!
- in Whatsapp, QR Code per connettere il proprio account a Unipile
- mostrare avanzamento upload qndo si carica consenso informato, imporre limiti a grandezza file
- testare storno scontrino con grande attenzione e delicatezza
- testare messaggio di fine rotolo
- se porto in cassa blocco o blocchi caricando pseudoscontrino, far sì che pseudoscontrino si svuoti automaticamente da altre voci precedentemente caricate
- se apro nota da blocco off (in modalità touch-ui? verificare) ha z-index piu basso dello zoom navigator
- se si crea un appuntamento (o si dragga) in una datetime PRECEDENTE alla datetime corrente, deve USCIRE UN WARNING
- in Servizi aggiungere tasto per scaricare in pdf e/o testo il listno prezzi (con o senza descrizione servizi)
- tab in heatmap per durate personalizzabili
- in Settings/Operatori nascondere l'header tabella di troppo "Invia Memo Turni"
- creare highlight sezione selezionata del menù di base.html
- creare tooltip per web appt table e tasti con over nella colonna Associa
- arricchire tooltip del popup button "vai a pacchetto" per blocchi correlati a seduta, che dica "per mettere il blocco in grigio, clicca e vai sul pacchetto, e indica seduta effettuata"
- normalizzare nomi e cognomi nei modal di associazione
- se clicco my-spia su blocchi contigui assegnati allo stesso cliente, e in questi blocchi contigui ci sono due blocchi sulla stessa cella (1/2 width) il my-spia per uno dei due NON PRENDE LE CARATTERISTICHE DEI BLOCCHI CONTIGUI ma DIVENTA ROSSO mentre gli altri sono gialli
- impostare logica per evitare multi-click in altri punti
- PACCHETTO: tasto per arrotondare totale scontato anche nel form di crea Pacchetto
- non prende stile grassetto/corsivo quando salvo il pdf del disclaimer del pacchetto
- aggiungere "+" per creare nuovo cliente nel form di crea pacchetti
- formattati nomi in Pacchetti
- pseudoblock navigator: ideale è che rimanga la "i" cliccabile nel campo cliente anche dopo che il cliente è stato selezionato da dropdown
- nella tabella Web Appt aggiungiamo anche un altro tipo di associazione, quella solo via cellulare (previo popup che confronti dati del cliente che ha prenotato con dati del cliente salvato)
- rigenerazione csrf-token blocca tutto se fermo per mezzora, aggiunto script in fondo a base.html
- Report: a mouseover su KPI Tile mostra in che modo è calcolato quel dato
- ERRORE quando provo a fare "copia" su un blocco off da modalità touch-ui... mi dice "non puoi copiare blocco off nel navigator", me lo da da wsgi.py, VERIFICARE E CORREGGERE
- quando associamo cliente booking online da "associa cliente" su blocco poi deve fare refresh e cambio colore
- booking: non deve poter fare cancellare al cliente appuntamento web fissato per orario precedente all'ora corrente
- quando apro "associa cliente" da blocco source=web non ancora assegnato e non trova il cellulare, quando apriamo "+" deve pre-compilare i campi NOME, COGNOME e CELLULARE come da nota cliente su appuntamento online
- verificare refresh di web app table, dopo associazione rimangono in rosso app da associare, devo fare refresh manuale per farli andare via!
- Booking: far sì che cliente possa annullare solo prenotazioni fissate in date e ora SUCCESSIVE a datetime corrente
- Report: btn Clienti se popolato mostra modal dove contenuto straborda in basso, formattare nomi
- Report: tile migliori clienti dell'anno deve contare anche PAGAMENTI per quel cliente senza appuntamento (che ora non fa)
- modificare da tag a nome il servizio nel memo whatsapp a operatrici
- su iphome tabella sedute in pacchetto_detail.html non ha margine destro e straborda
- Cassa: occhio dà errore di formato quando stampiamo scontrino con " ' " (per es Skin's)
- deve dare popup di conferma dopo aggiunta nuovo servizio
- template memo whatsapp, scrivere il primo servizio con "servizio_nome" invece che con "servizio_tag"
- settings/Clienti: header tabella non sono ordinabili e danno errore al click
- nascondere tasti "modifica" e "elimina" per operatori quando loggato da user (già disattivati ma non basta)
- al click su button consenso informato in pacchetto_detail.html, invece di scaricare direttamente il .pdf si devono aprire due tasti, uno per scaricare in pdf, uno per CARICARE IL PDF (con massima attenzione alla sicurezza), e salvarlo in database (creiamo quindi il relativo record nella class Pacchetto o quella che reputi più adatta). Quando ci sarà il documento caricato, al click sul bottone ci sarà invece sempre il button per scaricare in .pdf, ma anche quello per VISUALIZZARE il documento caricato o per ELIMINARLO. In caso fosse eliminato (campo vuoto in database) deve tornare la vista di quando non c'è il consenso caricato, ovvero tasto "stampa" e tasto "carica"
- in alcuni campi di testo con sfondo bianco il cursore al caricamento rimane bianco e quindi sembra scomparire, fix con cursore colore nero? (per es. nota appuntamento da blocco)
- sistemare editing del template disclaimer in Pacchetti
PACCHETTI: verificare sezioni Pacchetti in modalità touch e mobile e riadattare
SEZIONE MARKETING per invio whatsapp secondo filtri (CON LIMITAZIONI):
- limitare numero di invii, e implementare tooltip informativi
- fare sparire popup di notifica pagamento avvenuto in automatico dopo tot secondi
- PACCHETTI: colonne in nome pacchetto riordinabili dall'header, creata funzione per invio Whatsapp
- larghezza colonna "Nome Pacchetto" in pacchetti.html impostare max-width e... se possibile se straborda mostrare al posto di nome servizio i tag servizio, e il badge "PAGATO" se non c'è spazio deve mostrare solo il simbolo emoji
appuntamenti correlati a seduta pacchetto NON DEVONO AVERE POPUP-BUTTON "vai in cassa" ma bensì lo stesso popup-button solo in questi casi deve avere tooltip "vai al pacchetto", inoltre va scritto in nota o comunque contrassegnato in qualche modo il fatto che l'appuntamento è la seduta di un pacchetto
- far sì che se voglio creare appuntamento per cliente che ha pacchetto per quel servizio, dopo creazione blocco mi porti nel relativo pacchetto per visualizzare data compilata
- quando creo un appuntamento da pseudoblock navigator (searchClientNav e searchServiceNav) o da modal di creazione appuntamento (searchClient e searchService) in caso siano associati UN CLIENTE + UN SERVIZIO che trovano corrispondenza in uno dei pacchetti salvati in database, ALLORA ANDRA' CREATO UN BLOCCO APPUNTAMENTO con correlazione alla relativa seduta e relativo pacchetto, che avrà comportamento diverso (al posto di popup-button "vai in cassa" il click su quel popup-button porterà al pacchetto!)
- se in pacchetti.html visualizza pacchetti attivi, fare in modo che ci sia un simbolo per i pacchetti attivi non completati come sedute ma già pagati
- IMPORTANTE: SI E' PERSA LA LOGICA MULTI-TAGLIA e MULTI-INCOLLA per piu blocchi, dopo il primo copia o taglia al click su altro blocco INCOLLA DIRETTAMENTE IL SINGOLO BLOCCO SOVRAPPONENDOLO!!! RIPRISTINARE!!!
- Nel modal di preview il testo straborda, rendere scrollabile
- modal per descrizione servizio: tasti I e B per corsivo/grassetto devono rimanere selezionati con hover dopo il click, e se selezionati il carattere che scrivo sarà corsivo/grassetto, disattiva con un altro click
- mostrare descrizione appuntamenti in settings anche per utenti: user (ma non editabili)
- CALENDAR: visualizzare in web appointments table ANCHE GLI APPUNTAMENTI CANCELLATI DAL CLIENTE DA E-MAIL, dobbiamo utilizzare un soft delete aggiungendo al modello alla classe appointment il campo: "is_cancelled_by_client = db.Column(db.Boolean, default=False)"
- SETTINGS: inserire in database il campo cellulare per ogni operatore, poi scrivere codice per inviare whatsapp automatico la sera prima ad ogni operatrice con gli appuntamenti per il giorno dopo
- inserire "descrizione" al modello per la classe servizi oltre a tutte le aggiunte per pacchetti, solarium e magazzino
- in modalità touch-ui DISABILITARE IL CLICK CON PSEUDOBLOCCO IN NAV SU ALTRO BLOCCO ! (se no se voglio tagliare piu appuntamenti dà problemi)
- creare tasto SVUOTA sempre presente in pseudoblock navigator
- se modifico cliente da tasto "i" quando è già in pseudoblock navigator, dopo modifica non me lo fa più selezionare
- mostra notifica se ci sono appuntamenti in web appointments tables non ancora associati, anche per altri giorni che non siano quello attuale - implementare sistema di monitoring
- invio whatsapp a numeri esteri
- REPORT: contenuto di tile-settings straborda dal modal su mobile, correggere
- se prenoto due trattamenti uguali e invio wapp automatico, li scrive tutti e due, se però invio wapp manuale TIENE SOLO UNO DEI DUE APPUNTAMENTI... uniformare la logica
- WEB BOOKING: se indico operatore come non visibile in agenda, continua a contarlo tra operatori abilitati per servizi visibili online, correggere
- su touch-ui se clicco un blocco appuntamento stato 0 e poi clicco un blocco off, non toglie il tooltip del blocco appuntamento, correggere
- quando si assegna un cliente da web appt table il blocco deve CAMBIARE COLORE
- correggere problema X su ip della RCH ! (solo con start.py)
- eliminare conferme con invio wapp automatico su mobile
- sfondo del modal appuntamento per mobile dev'essere trasparente e non bianco
- controllare layout barra calendario su mobile
- problema z-index bottoni bottom bar in touch-ui quando ci sono due blocchi sulla stessa cella e un altro blocco sotto, a volte i bottom bar di uno dei due rimane coperto da appuntamento sotto
- se SPOSTO appuntamento e poi invio Wapp, prende i tag servizio invece dei nomi!
- cerchio di attesa quando si stampa scontrino in fine carta rch?
- indicare NUOVO CLIENTE (cioè cliente che ha un appuntamento prenotato PER LA PRIMA VOLTA)
- impostare possibilità di spostare/creare appuntamento ANCHE SOVRAPPONENDOLO A CELLE DOVE C'E' GIA' UN ALTRO APPUNTAMENTO
- IMPORTANTE!!! dopo TAGLIA di piu blocchi e incolla, a volte memo whatsapp prende orario del 2° appuntamento
- implementare "sposta" per blocco off in modalità touch-ui
- Heatmap Appuntamenti non deve contare i blocchi OFF 
- QUANDO PROVO A INSERIRE NUOVO CLIENTE IL MODAL ADD CLIENT RIMANEVA BLOCCATO, non leggeva i click sui cammpi
- in touch-ui quando si clicca TAGLIA deve SCOMPARIRE IL TOOLTIP INFO APPUNTAMENTO
- problema click su nome cliente in blocco appuntamento in modalità touch-ui
- da "prossimi appuntamenti" nel modal client info, quando clicco va sulla pagina della data ma non all'altezza giusta!
- aggiustare con precisione scroll a chiusura modal appuntamento su schermi mobile
- disattivare drag and drop per i tile di report su mobile
- download agenda giornaliera, se cambia giorno da navigator cambia contentuo file, ma tiene sempre la data di oggi nel titolo
- in SETTINGS se inseriamo nomi di servizi piu lunghi di quanto previsto in database (30) o tag (12), deve dare messaggio di errore non generico ma specifico per quella limitazione
- pulsante per esportare ANAGRAFICA completa dal database
- quando faccio TAGLIA e poi cerco di SELEZIONARE UN NUOVO SERVIZIO da mettere al posto (per es. cliente prenota sopracciglia, poi dopo 5 min chiama per cambiare in sopracciglia e baffetto) dà ERRORE di cliente non trovato... CORREGGERE questa funzione, o implementare una modalità di CAMBIO SERVIZIO
- visualizzare titolo di BLOCCHI OFF fino a un max di 12 caratteri
- occhio alla ricerca da web appointments table per nome
- eliminare colonna TEST per utenti "user" in report riassunto giornaliero
- definire modalità di storno, se solo ultimo o se possibile stornare da "registro scontrini", se si elimina uno scontrino is_fiscale (lo può fare solo admin!) deve inviare richiesta storno per QUELLO scontrino a rch, e deve risultare dal totale corrispettivi
- centrare testo nel tooltip info appuntamento (note sono sfalsate)
- in touch-ui quando compare sfondo nero su nome cliente nel blocco, scritta deve essere SEMPRE bianca
- non svuotare pseudoscontrino in cassa quando si salva con modifiche
- oltre al pulsante "copia" mostrare anche pulsante "note" per blocco in stato 2
- controllare fetch ricerca in cassa quando si digita nome servizi
- filtrare nomi apostrofo in web booking table
- opzioni "vai al pagamento" o "vedi in calendario" per blocchi in istituto in cassa.html, con icona floppy per blocchi editati
- quando attivo o disattivo invio messaggio wapp la mattina, deve scrivere subito in database e mostrare popup di conferma
- quando deseleziono "Visibile in Agenda" da settings/operators per un operatore, non salva l'impostazione e dà errore
- mostrare highlight a mouseover se devo creare blocco da pseudoblocco su altro blocco
- CHIUSURA GIORNALIERA
- blocchi creati da "aggiungi servizi" da altro blocco non prendono il colore del blocco originario
- creazione blocchi multipli con singoli click su pseudoblocco
- elimina da touch-ui mode non lascia il tooltip info aperto (fa reload)
- normalizzate le date di web-booking
- "sottocategoria" obbligatoria quando inseriamo un nuovo servizio
- in celle non attive in calendario il click non deve aprire modal
- con modal crea appt aperto il click su calendario deve mostrare warning
- web-booking: offrire al cliente un modo per CANCELLARE l'appuntamento preso
- modalità touch: settare click su blocco per blocchi off (mostrare solo note e copia) e blocchi in stato 2 (pagato)
- creazione in report per corrispettivi, ecc dove calcoliamo i prodotti
- modalità touch screen
- verificare invio mattutino whatsapp di promemoria
- dopo che si clicca "conferma" su pseudoscontrino in cassa, il tasto "conferma" si deve trasformare in "indietro" e tornare all'editing dello pseudoscontrino
- date navigator in report al cambio data
- quando nei modal di calendar seleziono cliente, serviceSearch dovrebbe mostrare prima della fetch alla 3a lettera i SERVIZI PIU UTILIZZATI DA QUEL CLIENTE in ordine di frequenza!
- mostra "nota cliente" editabile in edit appt modal
- sostituire titolo del pulsante "procedi al pagamento" in Calendar con "porta in cassa"
- non deve comparire "TEST" nel report giornaliero con utente user
- all'apertura modal edit appt per blocco source=web tiene in clipboard il cellulare
- non abbina piu automaticamente il sesso alla creazione cliente
- problema visualizzazione nomi apostrofati al click per aprire edit appt modal
- implementare la possibilità di inserire i servizi prenotati nei memo whatsapp
- formato nomi e cognomi per messaggi di conferma whatsapp
- uniformare formato data da modal info cliente ("i")
- salvare modifiche a pseudoscontrino per blocchi portati in cassa da calendar
- salvare e-mail al momento dell'associazione match di appuntamenti da booking online
- multi-turno operatori da settings: copia-incolla e popup di conferma, verificare
- filtro nomi nelle varie parti del progetto (per es. uniformare in top clients in report)
- se aggiungo servizio, e lo posiziono a 15 min di distanza dal blocco originario, prende correttamente lo stato (stato 1 per es) ma POI NON LO PORTA IN CASSA... impostato gap massimo di 30 min per pseudoblocchi
- se porto un pagamento in cassa e una volta in cassa cambio il servizio dal container pseudoscontrino, fa il pagamento ma il blocco appuntamento in cassa rimane in stato 0 ... invece deve andare in stato 1 come pagato !!! (magari aggiornando anche il/i servizio/i)
- risolvere problema di scontrino non emesso a fine carta (aumentare tempo di attesa prima di scriverlo in grigio)
- errore cassa dopo chiusura giornaliera
- settings/web booking -> se deseleziono "visualizza in booking" mostra - ancora comunque il servizio!
- filtrare blocchi in istituto visibili in cassa, solo quelli della GIORNATA CORRENTE ... oppure FARE IN MODO CHE A FINE GIORNATA I BLOCCHI RIMASTI IN STATI 1 TORNINO IN STATO 0 (o stato 2)
BOOKING: 
- correggere possibilità di multi-click su conferma prenotazione
- nuovo url con conferma popup per disdire appuntamento da e-mail lato cliente
- impostare condizione per invio whatsapp a numeri stranieri

comando per creare eseguibile da VSC:cd "C:\Program Files\SunBooking":

pyinstaller --onefile `
  --windowed `
  --paths . `
  --add-data "appl\templates;appl\templates" `
  --add-data "appl\static;appl\static" `
  --hidden-import=sqlalchemy `
  --hidden-import=flask `
  --hidden-import=psycopg2 `
  --hidden-import=dotenv `
  --hidden-import=werkzeug `
  --hidden-import=jinja2 `
  --hidden-import=flask_wtf `
  --hidden-import=flask_sqlalchemy `
  --hidden-import=requests `
  --hidden-import=pandas `
  --hidden-import=openpyxl `
  --hidden-import=waitress `
  --hidden-import=multiprocessing `
  --hidden-import=gender_guesser `
  --hidden-import=wtforms `
  --hidden-import=flask_login `
  --hidden-import=blinker `
start.py

   # Flask secret key (genera una nuova se necessario)
   SECRET_KEY=7jtGUeZejGItfvRMMgFFF0kFep71FA6hdgHU19iN1Q0

git remote add origin https://github.com/AlexBudet/booking.git

L'account Azure Communication Services è limitato a 10 messaggi di posta elettronica al minuto, 25 messaggi di posta elettronica in un'ora e 100 messaggi di posta elettronica al giorno. Se si verificano questi limiti e il volume di invio è superiore a questo, continuare con questa richiesta di supporto con il volume di posta desiderato per richiedere un aumento del limite.
---------------------------------------------------------
Prompt per richieste ad AI (per esempio: trovami la prima disponibilità in pausa pranzo settimana prossima con Erika per un massaggio di un'ora -> va alla pagina e blinka le celle adatte)

ALTRO:
- Verificare funzionamento LOTTERIA degli scontrini -> dà errore, verificare route

REPORT: creare una sezione REPORT con le stats e una sezione HOME con tiles interattivi (meteo, oroscopo, news estetica, andamento del mercato, video del giorno, console comandi piu usati)

CALENDAR... controllare:
- Molto codice globale → rischio collisioni e listener duplicati.
- Backend privo di transazioni/timezone-safe su operazioni sensibili: verificare

( ... IN FUTURO UNDO e REDO )
( ... IN FUTURO CELLE DA 1/3 di QUARTER per APP di 20 MIN )

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
CALENDAR
- PENSARE A WARNING DA APPLICARE A CERTI SERVIZI IN CASO DI APPUNTAMENTI SOVRAPPOSTI (per es. per quel servizio ho un solo macchinario, non posso farne due in contemporanea)
- creare COLONNE WISHLIST da attivare in periodi di grande passaggio (automaticamente se colonne target si liberano parte un whatsapp a cliente)

WEB BOOKING
- opzionale, offrire la possibilità di PAGARE ONLINE gli appuntamenti

DASHBOARD
- con news, sponsor (?), video, suggerimenti, oroscopo, meteo ecc ecc

SOLARIUM -> tenere su applicazione separata!
- integrazione SunBooking x monitor e ricaricabili solarium

Settings/Operatori:
- migliorare UI per creare turni operatori

PROMO e PACCHETTI
- raccolta punti (tot euro ogni tot euro spesi)

- creare un software tastiera virtuale per RCH

- creare query AI e query vocale ...?

...Proporre prezzi IVA INCLUSA!