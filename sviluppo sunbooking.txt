- implementare SEZIONE PACCHETTI: due tipi di scontistiche: % su totale e sedute omaggio ogni tot sedute, occhio agli STATI (Enum) di pacchetti e sedute (vedi in models.py)

Report:
- btn Clienti se popolato mostra modal dove contenuto straborda in basso, formattare nomi

Booking online:
- far sì che cliente possa annullare solo prenotazioni fissate in date e ora SUCCESSIVE a datetime corrente

Calendar:
- verificare refresh di web app table, dopo associazione rimangono in rosso app da associare, devo fare refresh manuale per farli andare via!
- quando associamo cliente booking online da "associa cliente" su blocco poi deve fare refresh e cambio colore
- quando apro "associa cliente" da blocco source=web non ancora assegnato e non trova il cellulare, quando apriamo "+" deve pre-compilare i campi NOME, COGNOME e CELLULARE come da nota cliente su appuntamento online

Settings:
- creare un campo extra da mostrare in pagina booking per eventuali warning (es: controllare spam e-mail se non si riceve codice)

- implementare SEZIONE MARKETING per invio whatsapp secondo filtri (CON LIMITAZIONI): ?
- invio Wapp automatico dopo pagamento di NUOVO CLIENTE per recensione

- WHATSAPP: VALUTARE PASSAGGIO A META VIA AZURE COMMUNICATION SERVICES !!!!!!!!! IMPORTANTISSIMO !!!

WEB APP:
- uniformare stili dei modal di calendar (tutti sfondo rosa con gradiente?)
- verificare sicurezza globale codice
- creare app per mobile

WEB BOOKING:
- opzionale: offrire la possibilità di PAGARE ONLINE gli appuntamenti
- opzionale: mostrare descrizione per ogni servizio

CORRETTI, DA VERIFICARE:
- Nel modal di preview il testo straborda, rendere scrollabile
- modal per descrizione servizio: tasti I e B per corsivo/grassetto devono rimanere selezionati con hover dopo il click, e se selezionati il carattere che scrivo sarà corsivo/grassetto, disattiva con un altro click
- mostrare descrizione appuntamenti in settings anche per utenti: user (ma non editabili)
- CALENDAR: visualizzare in web appointments table ANCHE GLI APPUNTAMENTI CANCELLATI DAL CLIENTE DA E-MAIL, dobbiamo utilizzare un soft delete aggiungendo al modello alla classe appointment il campo: "is_cancelled_by_client = db.Column(db.Boolean, default=False)"
- SETTINGS: inserire in database il campo cellulare per ogni operatore, poi scrivere codice per inviare whatsapp automatico la sera prima ad ogni operatrice con gli appuntamenti per il giorno dopo
- inserire "descrizione" al modello per la classe servizi oltre a tutte le aggiunte per pacchetti, solarium e magazzino
- in modalità touch-ui DISABILITARE IL CLICK CON PSEUDOBLOCCO IN NAV SU ALTRO BLOCCO ! (se no se voglio tagliare piu appuntamenti dà problemi)
- creare tasto SVUOTA sempre presente in pseudoblock navigator
- se modifico cliente da tasto "i" quando è già in pseudoblock navigator, dopo modifica non me lo fa più selezionare
- mostra notifica se ci sono appuntamenti in web appointments tables non ancora associati, anche per altri giorni che non siano quello attuale - implementare sistema di monitoring
- invio whatsapp a numeri esteri
- REPORT: contenuto di tile-settings straborda dal modal su mobile, correggere
- se prenoto due trattamenti uguali e invio wapp automatico, li scrive tutti e due, se però invio wapp manuale TIENE SOLO UNO DEI DUE APPUNTAMENTI... uniformare la logica
- WEB BOOKING: se indico operatore come non visibile in agenda, continua a contarlo tra operatori abilitati per servizi visibili online, correggere
- su touch-ui se clicco un blocco appuntamento stato 0 e poi clicco un blocco off, non toglie il tooltip del blocco appuntamento, correggere
- quando si assegna un cliente da web appt table il blocco deve CAMBIARE COLORE
- correggere problema X su ip della RCH ! (solo con start.py)
- eliminare conferme con invio wapp automatico su mobile
- sfondo del modal appuntamento per mobile dev'essere trasparente e non bianco
- controllare layout barra calendario su mobile
- problema z-index bottoni bottom bar in touch-ui quando ci sono due blocchi sulla stessa cella e un altro blocco sotto, a volte i bottom bar di uno dei due rimane coperto da appuntamento sotto
- se SPOSTO appuntamento e poi invio Wapp, prende i tag servizio invece dei nomi!
- cerchio di attesa quando si stampa scontrino in fine carta rch?
- indicare NUOVO CLIENTE (cioè cliente che ha un appuntamento prenotato PER LA PRIMA VOLTA)
- impostare possibilità di spostare/creare appuntamento ANCHE SOVRAPPONENDOLO A CELLE DOVE C'E' GIA' UN ALTRO APPUNTAMENTO
- IMPORTANTE!!! dopo TAGLIA di piu blocchi e incolla, a volte memo whatsapp prende orario del 2° appuntamento
- implementare "sposta" per blocco off in modalità touch-ui
- Heatmap Appuntamenti non deve contare i blocchi OFF 
- QUANDO PROVO A INSERIRE NUOVO CLIENTE IL MODAL ADD CLIENT RIMANEVA BLOCCATO, non leggeva i click sui cammpi
- in touch-ui quando si clicca TAGLIA deve SCOMPARIRE IL TOOLTIP INFO APPUNTAMENTO
- problema click su nome cliente in blocco appuntamento in modalità touch-ui
- da "prossimi appuntamenti" nel modal client info, quando clicco va sulla pagina della data ma non all'altezza giusta!
- aggiustare con precisione scroll a chiusura modal appuntamento su schermi mobile
- disattivare drag and drop per i tile di report su mobile
- download agenda giornaliera, se cambia giorno da navigator cambia contentuo file, ma tiene sempre la data di oggi nel titolo
- in SETTINGS se inseriamo nomi di servizi piu lunghi di quanto previsto in database (30) o tag (12), deve dare messaggio di errore non generico ma specifico per quella limitazione
- pulsante per esportare ANAGRAFICA completa dal database
- quando faccio TAGLIA e poi cerco di SELEZIONARE UN NUOVO SERVIZIO da mettere al posto (per es. cliente prenota sopracciglia, poi dopo 5 min chiama per cambiare in sopracciglia e baffetto) dà ERRORE di cliente non trovato... CORREGGERE questa funzione, o implementare una modalità di CAMBIO SERVIZIO
- visualizzare titolo di BLOCCHI OFF fino a un max di 12 caratteri
- occhio alla ricerca da web appointments table per nome
- eliminare colonna TEST per utenti "user" in report riassunto giornaliero
- definire modalità di storno, se solo ultimo o se possibile stornare da "registro scontrini", se si elimina uno scontrino is_fiscale (lo può fare solo admin!) deve inviare richiesta storno per QUELLO scontrino a rch, e deve risultare dal totale corrispettivi
- centrare testo nel tooltip info appuntamento (note sono sfalsate)
- in touch-ui quando compare sfondo nero su nome cliente nel blocco, scritta deve essere SEMPRE bianca
- non svuotare pseudoscontrino in cassa quando si salva con modifiche
- oltre al pulsante "copia" mostrare anche pulsante "note" per blocco in stato 2
- controllare fetch ricerca in cassa quando si digita nome servizi
- filtrare nomi apostrofo in web booking table
- opzioni "vai al pagamento" o "vedi in calendario" per blocchi in istituto in cassa.html, con icona floppy per blocchi editati
- quando attivo o disattivo invio messaggio wapp la mattina, deve scrivere subito in database e mostrare popup di conferma
- quando deseleziono "Visibile in Agenda" da settings/operators per un operatore, non salva l'impostazione e dà errore
- mostrare highlight a mouseover se devo creare blocco da pseudoblocco su altro blocco
- CHIUSURA GIORNALIERA
- blocchi creati da "aggiungi servizi" da altro blocco non prendono il colore del blocco originario
- creazione blocchi multipli con singoli click su pseudoblocco
- elimina da touch-ui mode non lascia il tooltip info aperto (fa reload)
- normalizzate le date di web-booking
- "sottocategoria" obbligatoria quando inseriamo un nuovo servizio
- in celle non attive in calendario il click non deve aprire modal
- con modal crea appt aperto il click su calendario deve mostrare warning
- web-booking: offrire al cliente un modo per CANCELLARE l'appuntamento preso
- modalità touch: settare click su blocco per blocchi off (mostrare solo note e copia) e blocchi in stato 2 (pagato)
- creazione in report per corrispettivi, ecc dove calcoliamo i prodotti
- modalità touch screen
- verificare invio mattutino whatsapp di promemoria
- dopo che si clicca "conferma" su pseudoscontrino in cassa, il tasto "conferma" si deve trasformare in "indietro" e tornare all'editing dello pseudoscontrino
- date navigator in report al cambio data
- quando nei modal di calendar seleziono cliente, serviceSearch dovrebbe mostrare prima della fetch alla 3a lettera i SERVIZI PIU UTILIZZATI DA QUEL CLIENTE in ordine di frequenza!
- mostra "nota cliente" editabile in edit appt modal
- sostituire titolo del pulsante "procedi al pagamento" in Calendar con "porta in cassa"
- non deve comparire "TEST" nel report giornaliero con utente user
- all'apertura modal edit appt per blocco source=web tiene in clipboard il cellulare
- non abbina piu automaticamente il sesso alla creazione cliente
- problema visualizzazione nomi apostrofati al click per aprire edit appt modal
- implementare la possibilità di inserire i servizi prenotati nei memo whatsapp
- formato nomi e cognomi per messaggi di conferma whatsapp
- uniformare formato data da modal info cliente ("i")
- salvare modifiche a pseudoscontrino per blocchi portati in cassa da calendar
- salvare e-mail al momento dell'associazione match di appuntamenti da booking online
- multi-turno operatori da settings: copia-incolla e popup di conferma, verificare
- filtro nomi nelle varie parti del progetto (per es. uniformare in top clients in report)
- se aggiungo servizio, e lo posiziono a 15 min di distanza dal blocco originario, prende correttamente lo stato (stato 1 per es) ma POI NON LO PORTA IN CASSA... impostato gap massimo di 30 min per pseudoblocchi
- se porto un pagamento in cassa e una volta in cassa cambio il servizio dal container pseudoscontrino, fa il pagamento ma il blocco appuntamento in cassa rimane in stato 0 ... invece deve andare in stato 1 come pagato !!! (magari aggiornando anche il/i servizio/i)
- risolvere problema di scontrino non emesso a fine carta (aumentare tempo di attesa prima di scriverlo in grigio)
- errore cassa dopo chiusura giornaliera
- settings/web booking -> se deseleziono "visualizza in booking" mostra - ancora comunque il servizio!
- filtrare blocchi in istituto visibili in cassa, solo quelli della GIORNATA CORRENTE ... oppure FARE IN MODO CHE A FINE GIORNATA I BLOCCHI RIMASTI IN STATI 1 TORNINO IN STATO 0 (o stato 2)
BOOKING: 
- correggere possibilità di multi-click su conferma prenotazione
- nuovo url con conferma popup per disdire appuntamento da e-mail lato cliente
- impostare condizione per invio whatsapp a numeri stranieri

comando per creare eseguibile da VSC:cd "C:\Program Files\SunBooking":

pyinstaller --onefile `
  --windowed `
  --paths . `
  --add-data "appl\templates;appl\templates" `
  --add-data "appl\static;appl\static" `
  --hidden-import=sqlalchemy `
  --hidden-import=flask `
  --hidden-import=psycopg2 `
  --hidden-import=dotenv `
  --hidden-import=werkzeug `
  --hidden-import=jinja2 `
  --hidden-import=flask_wtf `
  --hidden-import=flask_sqlalchemy `
  --hidden-import=requests `
  --hidden-import=pandas `
  --hidden-import=openpyxl `
  --hidden-import=waitress `
  --hidden-import=multiprocessing `
  --hidden-import=gender_guesser `
  --hidden-import=wtforms `
  --hidden-import=flask_login `
  --hidden-import=blinker `
start.py

   # Flask secret key (genera una nuova se necessario)
   SECRET_KEY=7jtGUeZejGItfvRMMgFFF0kFep71FA6hdgHU19iN1Q0

git remote add origin https://github.com/AlexBudet/booking.git
---------------------------------------------------------
AI (GEMINI KEY = AIzaSyBKhUZcOJ6r7_U1yaab2qLBzqY6kVjn8us) -> alternativa più economica con Azure? - implementare query ai in report
Prompt per richieste ad AI (per esempio: trovami la prima disponibilità in pausa pranzo settimana prossima con Erika per un massaggio di un'ora -> va alla pagina e blinka le celle adatte)

ALTRO:
- Implementare logging di errori gratis ma professionale e funzionante
- Verificare funzionamento LOTTERIA degli scontrini -> dà errore, verificare route

REPORT: creare una sezione REPORT con le stats e una sezione HOME con tiles interattivi (meteo, oroscopo, news estetica, andamento del mercato, video del giorno, console comandi piu usati)
- al click su alcuni tile (per esempio le heatmap) aprire modal in grande in cui si possano ottenere heatmap in base a filtri personalizzabili
- click su info cliente da tile top clients

CALENDAR... controllare:
- Molto codice globale → rischio collisioni e listener duplicati.
- Backend privo di transazioni/timezone-safe su operazioni sensibili: verificare

( ... IN FUTURO UNDO e REDO )
( ... IN FUTURO CELLE DA 1/3 di QUARTER per APP di 20 MIN )

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 

MODULI AGGIUNTIVI (occhio! fare in modo che da database i moduli aggiuntivi possano essere mostrati o nascosti in base a settaggio da pannello owner)

DASHBOARD
- con news, sponsor (?), video, suggerimenti, oroscopo, meteo ecc ecc

SOLARIUM -> tenere su applicazione separata!
- integrazione SunBooking x monitor e ricaricabili solarium

PROMO e PACCHETTI
- gift card (paghi in anticipo tot, hai gift card con +10% o +20%)
- pacchetti (ogni 5 seduta 1 omaggio, ecc) -> rateizzabili -> pagamento cassa integrato
- ricaricabili (come solarium, paghi 100 carichi 125 ecc)
- sistema rate (come usiamo in negozio)
- raccolta punti (tot euro ogni tot euro spesi)

...Proporre prezzi IVA INCLUSA!